#!/bin/bash

# Node_modules Temizlik Scripti
# Tarih: 2025-08-19
# AmaÃ§: ArÅŸivdeki gereksiz node_modules klasÃ¶rlerini gÃ¼venli bir ÅŸekilde temizle

echo "ğŸ§¹ Node_modules temizliÄŸi baÅŸlÄ±yor..."
echo "âš ï¸  DÄ°KKAT: Sadece node_modules klasÃ¶rleri silinecek, baÅŸka hiÃ§bir veri silinmeyecek!"
echo ""

# Ã–nce mevcut durumu kaydet
BEFORE_SIZE=$(du -sh /Users/berkhatirli/Desktop/unibos/archive 2>/dev/null | awk '{print $1}')
BEFORE_COUNT=$(find /Users/berkhatirli/Desktop/unibos/archive -type d -name "node_modules" 2>/dev/null | wc -l)

echo "ğŸ“Š Ä°ÅŸlem Ã–ncesi:"
echo "   ArÅŸiv Boyutu: $BEFORE_SIZE"
echo "   Node_modules sayÄ±sÄ±: $BEFORE_COUNT"
echo ""

# GÃ¼venlik iÃ§in Ã¶nce listele
echo "ğŸ” Silinecek klasÃ¶rler kontrol ediliyor..."

# Sadece archive/versions altÄ±ndaki node_modules'leri sil
echo "ğŸ“ archive/versions altÄ±ndaki node_modules temizleniyor..."
find /Users/berkhatirli/Desktop/unibos/archive/versions -type d -name "node_modules" -prune -exec rm -rf {} \; 2>/dev/null

# archive/t389 altÄ±ndaki node_modules'leri temizle
echo "ğŸ“ archive/t389 altÄ±ndaki node_modules temizleniyor..."
find /Users/berkhatirli/Desktop/unibos/archive/t389 -type d -name "node_modules" -prune -exec rm -rf {} \; 2>/dev/null

# archive/w371 altÄ±ndaki node_modules'leri temizle
echo "ğŸ“ archive/w371 altÄ±ndaki node_modules temizleniyor..."
find /Users/berkhatirli/Desktop/unibos/archive/w371 -type d -name "node_modules" -prune -exec rm -rf {} \; 2>/dev/null

# archive/temp_v336 altÄ±ndaki node_modules'leri temizle
echo "ğŸ“ archive/temp_v336 altÄ±ndaki node_modules temizleniyor..."
find /Users/berkhatirli/Desktop/unibos/archive/temp_v336 -type d -name "node_modules" -prune -exec rm -rf {} \; 2>/dev/null

echo ""
echo "âœ… Temizlik tamamlandÄ±!"
echo ""

# SonuÃ§larÄ± gÃ¶ster
AFTER_SIZE=$(du -sh /Users/berkhatirli/Desktop/unibos/archive 2>/dev/null | awk '{print $1}')
AFTER_COUNT=$(find /Users/berkhatirli/Desktop/unibos/archive -type d -name "node_modules" 2>/dev/null | wc -l)

echo "ğŸ“Š Ä°ÅŸlem SonrasÄ±:"
echo "   ArÅŸiv Boyutu: $AFTER_SIZE (Ã¶nceki: $BEFORE_SIZE)"
echo "   Kalan node_modules: $AFTER_COUNT (Ã¶nceki: $BEFORE_COUNT)"
echo ""

# DoÄŸrulama
VERSION_COUNT=$(ls /Users/berkhatirli/Desktop/unibos/archive/versions | wc -l)
echo "âœ… DoÄŸrulama:"
echo "   Versiyon sayÄ±sÄ±: $VERSION_COUNT (veri kaybÄ± yok)"
echo ""

echo "ğŸ‰ Temizlik baÅŸarÄ±yla tamamlandÄ±!"